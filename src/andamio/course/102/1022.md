---
{
  "title": "102.2: useWallet()",
  "slt": ["102.2"],
  "type": "Lesson",
  "description": "Mesh Wallet Hooks: useWallet()",
  "videoURL": "",
  "lastEdited": "1 Feb 2024",
  "author": "Leon Lai"
}
---

# Mesh React - SLT 102.2

Student Learning Target: I can connect or disconnect wallet using `useWallet()` hook.

## Learn More About Mesh Hooks For React

In the [previous lesson](/course/module/102/1021), you learned how to set up Mesh Provider and build a NavBar using the CardanoWallet Component. It allows users to connect their wallets, which is the foundation of Cardano applications. As mentioned in the previous lesson, You have already implemented part of `useWallet()` in the `pages/index.tsx` file, which it was used to determine whether the user has connected their wallet. `useWallet()` is a React hook provided by Mesh SDK and just like other React hooks, it is designed to help you build your applications faster. You may have seen or used some built-in React hooks in your projects already, for example, `useState()` and `useEffect()`.

This is an example of the `useWallet()` hook implementation code in the `pages/index.tsx` file:

```typescript
import { useWallet } from "@meshsdk/react";

export default function UserPage() {
  const { connected } = useWallet();

  return (
    <div className="p-3">
      <h1 className="text-2xl font-bold">User Page</h1>
      {!connected ? (
        <p>
          The wallet is{" "}
          <span className="text-red-500 font-bold">disconnected</span> at
          user-page
        </p>
      ) : (
        <p>
          The wallet is{" "}
          <span className="text-green-500 font-bold">connected</span> at
          user-page
        </p>
      )}
    </div>
  );
}
```

## Accessing various parameters and methods provided by the`useWallet()` Hook
In this section, you will learn how to create different components using the `useWallet()` hook. For example, a wallet connection component that is similar to `CardanoWallet` used in the last lesson. The benefit of building your own component for wallet connection allow you to customise your applications. You can use the hook to integrate wallet in your React application and access on-chain data with ease. 

In the following example, you can continue building on the project you created in the [previous lesson](/course/module/102/1021). If you haven't created the project yet, you can create a new project and follow the steps in the that lesson.

### Step-1: Create Connect Wallet Components

Create a file called `ConnectWallet.tsx` in the components folder

```bash
touch pages/components/ConnectWallet.tsx
```

Open the `ConnectWallet.tsx` file then copy-paste the following code:

```typescript
import { useWallet, useWalletList } from "@meshsdk/react";
import Image from "next/image";

export const ConnectWalletButton = ({
  setShowConnectWallet,
  balance,
}: {
  setShowConnectWallet: (show: boolean) => void;
  balance: number;
}) => {
  const { name, connecting, connected } = useWallet();

  const wallets = useWalletList();

  return (
    <div
      className="hover:opacity-80 cursor-pointer bg-white text-black flex items-center gap-2 p-2 rounded-md font-bold text-lg"
      onClick={() => setShowConnectWallet(true)}
    >
      {connected ? (
        <>
          <img
            src={
              wallets.find((w) => w.name === name)?.icon ||
              "/icons/WalletIcon.svg"
            }
            alt={name}
            width={32}
            height={32}
            style={{ width: "32px", height: "100%" }}
          />
          <div className="h-fit">â‚³{" " + (balance / 100000).toFixed(4)}</div>
        </>
      ) : connecting ? (
        "Connecting..."
      ) : (
        "Connect Wallet"
      )}
    </div>
  );
};

export const ConnectWalletPrompt = ({
  setShowConnectWallet,
}: {
  setShowConnectWallet: (show: boolean) => void;
}) => {
  const { connect, disconnect, connected } = useWallet();

  const wallets = useWalletList();

  const handleConnect = (walletName: string) => {
    connect(walletName);
    setShowConnectWallet(false);
  };

  const handleDisconnect = () => {
    disconnect();
    setShowConnectWallet(false);
  };

  return (
    <div className="fixed left-0 top-0 z-50 flex h-screen w-screen items-center justify-center bg-transparent backdrop-blur-sm">
      <div
        onClick={() => setShowConnectWallet(false)}
        className="absolute left-0 top-0 z-[-1] h-full w-full "
      />
      <div className="flex flex-col w-1/5 gap-2 rounded-md bg-black text-white p-6">
        <div className="flex items-center justify-between">
          <div className="text-xl font-bold">Connect wallet</div>

          <div
            className="hover:opacity-80 cursor-pointer"
            onClick={() => setShowConnectWallet(false)}
          >
            X
          </div>
        </div>
        {wallets.map((wallet) => (
          <div
            className="hover:opacity-80 cursor-pointer flex w-full rounded-sm bg-gray-600 items-center gap-2 p-2"
            key={wallet.name}
            onClick={() => handleConnect(wallet.name)}
          >
            <img
              src={wallet.icon}
              alt={wallet.name}
              style={{ width: "48px" }}
            />
            <div className="capitalize text-lg">{wallet.name}</div>
          </div>
        ))}
        {connected && (
          <div
            className="hover:opacity-80 cursor-pointer w-full rounded-sm bg-gray-600 gap-2 p-2"
            onClick={() => handleDisconnect()}
          >
            Disconnect
          </div>
        )}
      </div>
    </div>
  );
};
```

In the `ConnectWallet.tsx` file, you created two complementing components: `ConnectWalletPrompt` for users to connect or disconnect their wallets and `ConnectWalletButton` to open that interface, as well as displaying the wallet connection status and balance. 

For `ConnectWalletButton`, you used the `name`, `connecting`, and `connected` properties from the `useWallet()` hook to determine the wallet connection status and access the wallet name to show respective logo. 

For `ConnectWalletPrompt`, you used the `connect`, and `disconnect` properties from the `useWallet()` hook to connect to a specific wallet or disconnect the wallet. 

The `useWalletList()` hook is also used in this case to get the list of installed wallets on the user instance.

### Step-2: Update the Navbar Component with new Connect Wallet components

Open the `ConnectWallet.tsx` file then copy-paste the following code:

```typescript
import { Asset } from "@meshsdk/core";
import { useWallet } from "@meshsdk/react";
import Link from "next/link";
import { useEffect, useState } from "react";
import { ConnectWalletButton, ConnectWalletPrompt } from "./ConnectWallet";

export default function Navbar() {
  const [showConnectWallet, setShowConnectWallet] = useState(false);
  const [lovelace, setLovelace] = useState(0);
  const { connected, wallet } = useWallet();

  const getWalletBalance = async () => {
    const balance = await wallet.getBalance();
    const lovelace = balance.find(
      (asset: Asset) => asset.unit === "lovelace"
    )?.quantity || 0;
    setLovelace(lovelace);
  };

  useEffect(() => {
    if (connected && wallet) {
      getWalletBalance();
    }
  }, [connected, wallet]);

  return (
    <div className="flex bg-black text-white p-5 justify-between">
      {showConnectWallet && (
        <ConnectWalletPrompt setShowConnectWallet={setShowConnectWallet} />
      )}
      <div className="flex">
        <Link href="/" className="mr-5 hover:font-bold text-xl">
          Home
        </Link>
        <Link href="/users" className="hover:font-bold text-xl">
          Users
        </Link>
      </div>
      <ConnectWalletButton
        setShowConnectWallet={setShowConnectWallet}
        balance={lovelace}
      />
    </div>
  );
}
```

You have now created your own wallet connection components and implemented them into the `NavBar` using the `useWallet()` hook. The design and user experience can be customized to fit your specific application needs. The fundamental logic is to conditionally rendered the `ConnectWalletPrompt` component based on the `showConnectWallet` variable defined using the `useState` React hook. When clicking the `ConnectWalletButton`, the `showConnectWallet` state is set to `true` and the `ConnectWalletPrompt` component is rendered. It will show as `Connect Wallet` when no wallet is connected, `Connecting...` when the wallet is connecting, and finally the wallet balance when connected. 

The current implementation to get the lovelace balance from wallet is a bit complex. You first have to get the `wallet` from the `useWallet()` hook, which is a `BrowserWallet` instance that have many useful variables and methods. You can use `getBalance()` method that returns an array of `Asset` objects, including lovelace and tokens. Notice that the `Asset` type is imported from `@meshsdk/core` which can be simplified as `{ unit: string, quantity: number }`. Therefore, you can filter the array to find the matching asset's unit to get the lovelace balance. In the upcoming module 102.5, you will learn about the `useLovelace()` hook which is a simpler way to get the lovelace balance.

### Step-3: Run the application on the development server

```bash
npm run dev
```

Now open a browser, go to the URL http://localhost:3000. You will see the updated NavBar with your custom components in the right corner. Click on the `Connect Wallet` button, and then it should prompt you a list of installed wallets to connect. When connected, you can see the wallet balance and the icon of the connected wallet, just like the `CardanoWallet` component you used before. The button could be clicked on again and this time the prompt will include a `Disconnect` option to disconnect the wallet. You can modify the code examples in this module according to your project ideas. Feel free to make modifications and create something different while applying the same principles from code example above to practice your skills as a developer.


